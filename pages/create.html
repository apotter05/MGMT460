<!DOCTYPE html>
<html>
    <head>
        <title>codeEternal Media Database - Create</title>
        <script language="javascript">
            window.addEventListener("load", main)

            function main() {
                btn.addEventListener("click", sendData)
            }

            async function sendData() {
                data = {
                    title: title.value.trim(),
                    year: year.value.trim(),
                    genres: genres.value.trim(),
                    rating: rating.value.trim(),
                    runtime: runtime.value.trim(),
                    website: website.value.trim()
                }
                url = "http://localhost:7777/create"

                let response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(data)
                })
                alert("test")
                // if (response.ok) {location.href="retrieve.html"}
                location.href="retrieve.html"
            }
        </script>
        <link rel="stylesheet" href="styles/layout.css">
        <link rel="stylesheet" href="styles/style.css">
        <link rel="stylesheet" href="styles/input.css">
    </head>
    <body>
        <div class="menu">
            <img src="images/codeEternal_logo.png" class="logo">
            <ul class="links">
                <li><a href="home.html">Home</a></li>
                <li><a href="create.html">New Movie</a></li>
                <li><a href="retrieve.html">View Records</a></li>
                <li><a href="update.html">Update Record</a></li>
                <li><a href="delete.html">Delete Movie</a></li>
            </ul>
        </div>
        <div class="content center bgGradient">
            <div class="form bgGrey">
                <br>
                <p class="title">Create A New Movie Entry</p>
                <form><table align="center">
                    <tr>
                        <td>*Title:</td>
                        <td style="width: 25pt"></td>
                        <td align="left"><input id="title" required type="text" class="wide text"></td>
                    </tr>
                    <tr>
                        <td>*Year:</td>
                        <td></td>
                        <td align="left"><input id="year" required type="text" class="narrow text"></td>
                    </tr>
                    <tr>
                        <td>Genres:</td>
                        <td></td>
                        <td align="left"><input id="genres" type="text" class="wide text"></td>
                    </tr>
                    <tr>
                        <td>Rating:</td>
                        <td></td>
                        <td align="left"><input id="rating" type="text" class="narrow text"></td>
                    </tr>
                    <tr>
                        <td>Runtime:</td>
                        <td></td>
                        <td align="left"><input id="runtime" type="text" class="wide text" placeholder="#h ##min"></td>
                    </tr>
                    <tr>
                        <td>*Website:</td>
                        <td></td>
                        <td align="left"><input id="website" required type="text" class="wide text"></td>
                    </tr>
                </table>
                <br>
                <input type="submit" id="btn" value="Create Movie Entry" class="center"><br><br></form>
            </div>
        </div>
        <div class="content center bgRed">
            <a href="home.html"><button>Return Home</button></a>
        </div>
    </body>
</html>